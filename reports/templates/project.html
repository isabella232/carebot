{% extends "_base.html" %}
{% load humanize %}
{% load tz %}
{% load admin_urls %}
{% load social %}

{% block title %}{{ project.title }} :: carebot{% endblock %}

{% block body %}
<div class="container-fluid">
    <h1>{{ project.title }}</h1>

    <p><a href="{% url 'reports.views.index' %}">&laquo; Back to project list</a></p>

    <h3>Configuration <span class="small">(<a href="{% url 'admin:reports_project_change' project.pk %}">edit</a>)</span></h3>

    <table class="table table-condensed">
        <tbody>
            <tr>
                <td>Google Analytics Property ID</td>
                <td>{{ project.property_id }}</td>
            </tr>
            <tr>
                <td>Domain</td>
                <td>{{ project.domain }}</td>
            </tr>
            <tr>
                <td>Prefix</td>
                <td><a href="http://{{ project.domain }}{{ project.prefix }}">{{ project.prefix }}</a></td>
            </tr>
            <tr>
                <td>Launch date</td>
                <td>{{ project.start_date }}</td>
            </tr>
            <tr>
                <td>Tags</td>
                <td>{{ project.tag_list }}</td>
            </tr>
        </tbody>
    </table>

    <h3>Lifetime social activity</h3>
    
    <table class="table table-condensed table-striped">
        <thead>
            <tr>
                <th>Interaction</th>
                <th class="value">Count</th>
                <th class="value">Per Session</th>
            <tr>
        </thead>
        <tbody>
            <tr>
                <td>Facebook likes</td>
                <td class="value">{{ project.social.facebook_likes|intcomma }}</td>
                <td class="value">{% social_per_session project "facebook_likes" %}</td>
            </tr>

            <tr>
                <td>Facebook shares</td>
                <td class="value">{{ project.social.facebook_shares|intcomma }}</td>
                <td class="value">{% social_per_session project "facebook_shares" %}</td>
            </tr>

            <tr>
                <td>Facebook comments</td>
                <td class="value">{{ project.social.facebook_comments|intcomma }}</td>
                <td class="value">{% social_per_session project "facebook_comments" %}</td>
            </tr>

            <tr>
                <td>Twitter</td>
                <td class="value">{{ project.social.twitter|intcomma }}</td>
                <td class="value">{% social_per_session project "twitter" %}</td>
            </tr>

            <tr>
                <td>Google+</td>
                <td class="value">{{ project.social.google|intcomma }}</td>
                <td class="value">{% social_per_session project "google" %}</td>
            </tr>
            
            <tr>
                <td>Pinterest</td>
                <td class="value">{{ project.social.pinterest|intcomma }}</td>
                <td class="value">{% social_per_session project "pinterest" %}</td>
            </tr>
            
            <tr>
                <td>LinkedIn</td>
                <td class="value">{{ project.social.linkedin|intcomma }}</td>
                <td class="value">{% social_per_session project "linkedin" %}</td>
            </tr>
            
            <tr>
                <td>StumbleUpon</td>
                <td class="value">{{ project.social.stumbleupon|intcomma }}</td>
                <td class="value">{% social_per_session project "stumbleupon" %}</td>
            </tr>

            <tr class="total">
                <td>Total</td>
                <td class="value">{{ project.social.total|intcomma }}</td>
                <td class="value">{% social_per_session project "total" %}</td>
            </tr>
        <tbody>
    </table>
 
    <span class="last-update">Last updated: {{ project.social.last_update|localtime }}</span>

    <h3>Reports</h3>

    <table class="table table-condensed">
        <thead>
            <tr>
                <th>Report timespan</th>
                <th>Run date</th>
                <th class="value">Sessions</th>
            </tr>
        </thead>
        <tbody>
            {% for report in reports %}
            <tr>
                <td><a href="{{ report.get_absolute_url }}">{{ report.timespan }}</a></td>
                <td>{{ report.last_run|localtime }}</td>
                <td class="value">{{ report.sessions|intcomma }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
